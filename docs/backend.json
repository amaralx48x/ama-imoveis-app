
{
  "entities": {
    "Property": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Property",
      "type": "object",
      "description": "Represents a property listing.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the property." },
        "title": { "type": "string", "description": "Title of the property listing." },
        "description": { "type": "string", "description": "Detailed description of the property." },
        "price": { "type": "number", "description": "Price of the property." },
        "bedrooms": { "type": "number", "description": "Number of bedrooms." },
        "bathrooms": { "type": "number", "description": "Number of bathrooms." },
        "garage": { "type": "number", "description": "Number of garage spaces." },
        "rooms": { "type": "number", "description": "Total number of rooms." },
        "builtArea": { "type": "number", "description": "Built area in square meters." },
        "totalArea": { "type": "number", "description": "Total area in square meters." },
        "imageUrls": { "type": "array", "items": { "type": "string" }, "description": "Array of URLs for property images." },
        "city": { "type": "string", "description": "City where the property is located." },
        "type": { "type": "string", "enum": ["Apartamento", "Casa", "Terreno"], "description": "Type of property." },
        "operation": { "type": "string", "enum": ["Venda", "Aluguel"], "description": "Type of operation." },
        "featured": { "type": "boolean", "description": "Indicates if the property is featured." },
        "address": { "type": "string", "description": "Full address of the property." },
        "agentId": { "type": "string", "description": "ID of the agent who listed the property." }
      },
      "required": [
        "id", "title", "description", "price", "bedrooms", "bathrooms", "garage", "rooms", 
        "builtArea", "totalArea", "imageUrls", "city", "type", "operation", "featured", "address", "agentId"
      ]
    },
    "Agent": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Agent",
      "type": "object",
      "description": "Represents a real estate agent.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the agent, usually from Firebase Auth UID." },
        "name": { "type": "string", "description": "Name of the agent or their site." },
        "creci": { "type": "string", "description": "CRECI number of the agent." },
        "photoUrl": { "type": "string", "description": "URL of the agent's photo." },
        "email": { "type": "string", "description": "Contact email for the agent." }
      },
      "required": ["id", "name", "email"]
    },
    "Lead": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lead",
      "type": "object",
      "description": "Represents a lead from a contact form.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "message": { "type": "string" },
        "propertyId": { "type": "string", "description": "Optional ID of the property the lead is interested in." },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "name", "email", "message", "createdAt"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "collections": [
      {
        "path": "/agents/{agentId}",
        "schema": { "$ref": "#/entities/Agent" },
        "description": "Stores agent profile information. The document ID is the agent's Firebase Auth UID."
      },
      {
        "path": "/agents/{agentId}/properties/{propertyId}",
        "schema": { "$ref": "#/entities/Property" },
        "description": "Stores properties listed by a specific agent. The `agentId` in the path ensures data ownership and simplifies security rules."
      },
      {
        "path": "/leads/{leadId}",
        "schema": { "$ref": "#/entities/Lead" },
        "description": "Stores leads generated from the contact forms on the website."
      }
    ]
  }
}
